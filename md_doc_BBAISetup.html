<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>CORC Project: Setting up CAN device on BeagleBone AI</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CORC Project
   </div>
   <div id="projectbrief">CANOpen Robot Controller Software Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Setting up CAN device on BeagleBone AI </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The BeagleBone AI doesn't natively expose its can device. To do so an update of the Device Tree Source (DTS) is required.</p>
<h2>Instructions</h2>
<h3>Short version using binary (compiled) DTB file</h3>
<ol type="1">
<li>Download the updated <a href="am5729-beagleboneai-custom-can.dtb">DTB file</a></li>
<li>Copy it into the '/boot/dtbs' folder of your BB AI: <code>/boot/dtbs/am5729-beagleboneai-custom-can.dtb</code></li>
<li>On the BB AI edit the uEnv file: <code>$ sudo editor /boot/uEnv.txt</code> and add the line: <code>dtb=am5729-beagleboneai-custom-can.dtb</code>. Save the file (ctrl+x).</li>
<li>Reboot the BB AI (<code>$ sudo reboot</code>).</li>
<li>Test: <code>$ ip link</code></li>
</ol>
<h3>Longer version using DTS file</h3>
<p>See <a href="https://stackoverflow.com/questions/62207737/beaglebone-ai-how-to-setup-can-bus">StackOverflow post</a>.</p>
<h3>Note</h3>
<p>This will expose the CAN port of pins P9_24 and P9_26 as CAN0 device as opposed to the BeagleBone Black where it corresponds to CAN1 devcie. To use it you should thus either use the iniCANBBAI.sh script or manually configure the can0 port:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;$ sudo ip link set can0 up type can bitrate 1000000</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;$ sudo ifconfig can0 up</div></div><!-- fragment --><h2>Source</h2>
<p>See <a href="https://stackoverflow.com/questions/62207737/beaglebone-ai-how-to-setup-can-bus">StackOverflow post</a>. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
