<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>CORC Project: Heartbeat consumer</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CORC Project
   </div>
   <div id="projectbrief">CANOpen Robot Controller Software Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Heartbeat consumer<div class="ingroups"><a class="el" href="group__CO__CANopen.html">CANopen stack</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Collaboration diagram for Heartbeat consumer:</div>
<div class="dyncontent">
<center><table><tr><td><img src="group__CO__HBconsumer.png" border="0" alt="" usemap="#group____CO____HBconsumer"/>
<map name="group____CO____HBconsumer" id="group____CO____HBconsumer">
<area shape="rect" id="node2" href="group__CO__CANopen.html" title="CANopen stack" alt="" coords="5,5,125,32"/>
</map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:CO__HBconsumer_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="CO__HBconsumer_8h.html">CO_HBconsumer.h</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structCO__HBconsNode__t.html">CO_HBconsNode_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structCO__HBconsumer__t.html">CO_HBconsumer_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gacc31c4848a14c9c367505b20e4a6a496"><td class="memItemLeft" align="right" valign="top"><a class="el" href="CO__driver_8h.html#a1cb2d3466eb0c6d267f3b5ff1a0d9532">CO_ReturnError_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CO__HBconsumer.html#gacc31c4848a14c9c367505b20e4a6a496">CO_HBconsumer_init</a> (<a class="el" href="structCO__HBconsumer__t.html">CO_HBconsumer_t</a> *HBcons, <a class="el" href="structCO__EM__t.html">CO_EM_t</a> *em, <a class="el" href="structCO__SDO__t.html">CO_SDO_t</a> *SDO, const <a class="el" href="CO__command_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> HBconsTime[], <a class="el" href="structCO__HBconsNode__t.html">CO_HBconsNode_t</a> monitoredNodes[], <a class="el" href="CO__command_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> numberOfMonitoredNodes, <a class="el" href="structCO__CANmodule__t.html">CO_CANmodule_t</a> *CANdevRx, <a class="el" href="CO__command_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> CANdevRxIdxStart)</td></tr>
<tr class="separator:gacc31c4848a14c9c367505b20e4a6a496"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga87b4601593551c6cb54cc5f881d72f1d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CO__HBconsumer.html#ga87b4601593551c6cb54cc5f881d72f1d">CO_HBconsumer_process</a> (<a class="el" href="structCO__HBconsumer__t.html">CO_HBconsumer_t</a> *HBcons, <a class="el" href="CO__driver_8h.html#a2b21255bd7f7192db778983b15089208">bool_t</a> NMTisPreOrOperational, <a class="el" href="CO__command_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> timeDifference_ms)</td></tr>
<tr class="separator:ga87b4601593551c6cb54cc5f881d72f1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>CANopen Heartbeat consumer protocol.</p>
<p>Heartbeat consumer monitors Heartbeat messages from remote nodes. If any monitored node don't send his Heartbeat in specified time, Heartbeat consumer sends emergency message. If all monitored nodes are operational, then variable <em>allMonitoredOperational</em> inside <a class="el" href="structCO__HBconsumer__t.html">CO_HBconsumer_t</a> is set to true. Monitoring starts after the reception of the first HeartBeat (not bootup).</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__CO__NMT__Heartbeat.html">NMT and Heartbeat</a> </dd></dl>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gacc31c4848a14c9c367505b20e4a6a496"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="CO__driver_8h.html#a1cb2d3466eb0c6d267f3b5ff1a0d9532">CO_ReturnError_t</a> CO_HBconsumer_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structCO__HBconsumer__t.html">CO_HBconsumer_t</a> *&#160;</td>
          <td class="paramname"><em>HBcons</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structCO__EM__t.html">CO_EM_t</a> *&#160;</td>
          <td class="paramname"><em>em</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structCO__SDO__t.html">CO_SDO_t</a> *&#160;</td>
          <td class="paramname"><em>SDO</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="CO__command_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td>
          <td class="paramname"><em>HBconsTime</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structCO__HBconsNode__t.html">CO_HBconsNode_t</a>&#160;</td>
          <td class="paramname"><em>monitoredNodes</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="CO__command_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&#160;</td>
          <td class="paramname"><em>numberOfMonitoredNodes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structCO__CANmodule__t.html">CO_CANmodule_t</a> *&#160;</td>
          <td class="paramname"><em>CANdevRx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="CO__command_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>&#160;</td>
          <td class="paramname"><em>CANdevRxIdxStart</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize Heartbeat consumer object.</p>
<p>Function must be called in the communication reset section.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">HBcons</td><td>This object will be initialized. </td></tr>
    <tr><td class="paramname">em</td><td>Emergency object. </td></tr>
    <tr><td class="paramname">SDO</td><td>SDO server object. </td></tr>
    <tr><td class="paramname">HBconsTime</td><td>Pointer to <em>Consumer Heartbeat Time</em> array from Object Dictionary (index 0x1016). Size of array is equal to numberOfMonitoredNodes. </td></tr>
    <tr><td class="paramname">monitoredNodes</td><td>Pointer to the externaly defined array of the same size as numberOfMonitoredNodes. </td></tr>
    <tr><td class="paramname">numberOfMonitoredNodes</td><td>Total size of the above arrays. </td></tr>
    <tr><td class="paramname">CANdevRx</td><td>CAN device for Heartbeat reception. </td></tr>
    <tr><td class="paramname">CANdevRxIdxStart</td><td>Starting index of receive buffer in the above CAN device. Number of used indexes is equal to numberOfMonitoredNodes.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="CO__driver_8h.html#a1cb2d3466eb0c6d267f3b5ff1a0d9532">CO_ReturnError_t</a> CO_ERROR_NO or CO_ERROR_ILLEGAL_ARGUMENT. </dd></dl>

<p>Definition at line <a class="el" href="CO__HBconsumer_8c_source.html#l00167">167</a> of file <a class="el" href="CO__HBconsumer_8c_source.html">CO_HBconsumer.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga87b4601593551c6cb54cc5f881d72f1d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CO_HBconsumer_process </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structCO__HBconsumer__t.html">CO_HBconsumer_t</a> *&#160;</td>
          <td class="paramname"><em>HBcons</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="CO__driver_8h.html#a2b21255bd7f7192db778983b15089208">bool_t</a>&#160;</td>
          <td class="paramname"><em>NMTisPreOrOperational</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="CO__command_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>&#160;</td>
          <td class="paramname"><em>timeDifference_ms</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Process Heartbeat consumer object.</p>
<p>Function must be called cyclically.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">HBcons</td><td>This object. </td></tr>
    <tr><td class="paramname">NMTisPreOrOperational</td><td>True if this node is NMT_PRE_OPERATIONAL or NMT_OPERATIONAL. </td></tr>
    <tr><td class="paramname">timeDifference_ms</td><td>Time difference from previous function call in [milliseconds]. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="CO__HBconsumer_8c_source.html#l00205">205</a> of file <a class="el" href="CO__HBconsumer_8c_source.html">CO_HBconsumer.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
